module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},44665,a=>{a.n(a.i(28992))},21683,a=>{a.n(a.i(46308))},7576,a=>{a.n(a.i(10021))},73971,a=>{a.n(a.i(27551))},73921,a=>{a.n(a.i(20837))},35868,a=>{a.n(a.i(60322))},90227,a=>{"use strict";a.s(["FeedList",()=>b]);let b=(0,a.i(88265).registerClientReference)(function(){throw Error("Attempted to call FeedList() from the server but FeedList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/components/app/feed/FeedList.tsx <module evaluation>","FeedList")},64017,a=>{"use strict";a.s(["FeedList",()=>b]);let b=(0,a.i(88265).registerClientReference)(function(){throw Error("Attempted to call FeedList() from the server but FeedList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/components/app/feed/FeedList.tsx","FeedList")},25260,a=>{"use strict";a.i(90227);var b=a.i(64017);a.n(b)},82251,36721,a=>{"use strict";var b=a.i(97834);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],82251);let g=f("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);a.s(["Flame",()=>g],36721)},18619,a=>{"use strict";a.s(["ContributionGraph",()=>b]);let b=(0,a.i(88265).registerClientReference)(function(){throw Error("Attempted to call ContributionGraph() from the server but ContributionGraph is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/components/app/profile/ContributionGraph.tsx <module evaluation>","ContributionGraph")},39989,a=>{"use strict";a.s(["ContributionGraph",()=>b]);let b=(0,a.i(88265).registerClientReference)(function(){throw Error("Attempted to call ContributionGraph() from the server but ContributionGraph is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/components/app/profile/ContributionGraph.tsx","ContributionGraph")},2902,a=>{"use strict";a.i(18619);var b=a.i(39989);a.n(b)},79124,a=>{"use strict";a.s(["FollowButton",()=>b]);let b=(0,a.i(88265).registerClientReference)(function(){throw Error("Attempted to call FollowButton() from the server but FollowButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/components/app/profile/FollowButton.tsx <module evaluation>","FollowButton")},20601,a=>{"use strict";a.s(["FollowButton",()=>b]);let b=(0,a.i(88265).registerClientReference)(function(){throw Error("Attempted to call FollowButton() from the server but FollowButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/apps/web/components/app/profile/FollowButton.tsx","FollowButton")},41639,a=>{"use strict";a.i(79124);var b=a.i(20601);a.n(b)},69495,a=>{"use strict";var b=a.i(61944),c=a.i(80159);a.i(22530);var d=a.i(38584),e=a.i(54009),f=a.i(82251);let g=(0,f.default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),h=(0,f.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),i=(0,f.default)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var j=a.i(36721),k=a.i(2902),l=a.i(25260),m=a.i(41639);async function n({params:a}){let{username:b}=await a;return{title:`@${b}`}}async function o({params:a}){let{username:f}=await a,n=await (0,c.createClient)(),{data:{user:o}}=await n.auth.getUser(),{data:p}=await n.from("users").select("*").eq("username",f).single();p||(0,d.notFound)();let q=o?.id===p.id,r=!1;if(o&&!q){let{data:a}=await n.from("follows").select("id").eq("follower_id",o.id).eq("following_id",p.id).maybeSingle();r=!!a}let{count:s}=await n.from("follows").select("*",{count:"exact",head:!0}).eq("following_id",p.id),{count:t}=await n.from("follows").select("*",{count:"exact",head:!0}).eq("follower_id",p.id),{count:u}=await n.from("posts").select("*",{count:"exact",head:!0}).eq("user_id",p.id),{data:v}=await n.rpc("calculate_user_streak",{p_user_id:p.id}),{data:w}=await n.from("daily_usage").select("cost_usd").eq("user_id",p.id),x=w?.reduce((a,b)=>a+Number(b.cost_usd),0)??0,y=new Date,z=new Date;z.setDate(y.getDate()-364);let{data:A}=await n.from("daily_usage").select("date, cost_usd").eq("user_id",p.id).gte("date",z.toISOString().split("T")[0]).lte("date",y.toISOString().split("T")[0]),{data:B}=await n.from("posts").select("daily_usage:daily_usage!posts_daily_usage_id_fkey(date)").eq("user_id",p.id),C=new Set(B?.map(a=>a.daily_usage?.date).filter(Boolean)),D=(A??[]).map(a=>({date:a.date,cost_usd:Number(a.cost_usd),has_post:C.has(a.date)})),{data:E}=await n.from("posts").select(`
      *,
      user:users!posts_user_id_fkey(*),
      daily_usage:daily_usage!posts_daily_usage_id_fkey(*),
      kudos_count:kudos(count),
      comment_count:comments(count)
    `).eq("user_id",p.id).order("created_at",{ascending:!1}).limit(20),F=[];if(E){let a=E.map(a=>a.id),{data:b}=o?await n.from("kudos").select("post_id").eq("user_id",o.id).in("post_id",a):{data:[]},c=new Set(b?.map(a=>a.post_id));F=E.map(a=>({...a,kudos_count:a.kudos_count?.[0]?.count??0,comment_count:a.comment_count?.[0]?.count??0,has_kudosed:c.has(a.id)}))}return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("header",{className:"sticky top-0 z-10 flex h-16 items-center border-b border-border bg-background px-6",children:(0,b.jsxs)("h3",{className:"text-lg font-medium",children:["@",f]})}),(0,b.jsxs)("div",{className:"border-b border-border p-6",children:[(0,b.jsxs)("div",{className:"flex items-start gap-5",children:[p.avatar_url?(0,b.jsx)("img",{src:p.avatar_url,alt:"",className:"h-20 w-20 rounded-full object-cover"}):(0,b.jsx)("span",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-foreground text-2xl font-semibold text-background",children:p.username?.[0]?.toUpperCase()??"?"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-2xl font-medium",style:{letterSpacing:"-0.03em"},children:p.display_name??p.username}),!q&&o&&(0,b.jsx)(m.FollowButton,{username:f,initialFollowing:r}),q&&(0,b.jsx)(e.default,{href:"/settings",className:"border border-border px-3 py-1 text-sm font-semibold hover:bg-subtle",style:{borderRadius:4},children:"Edit Profile"})]}),p.display_name&&(0,b.jsxs)("p",{className:"text-sm text-muted",children:["@",p.username]}),p.bio&&(0,b.jsx)("p",{className:"mt-2 text-sm",children:p.bio}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap gap-4 text-sm text-muted",children:[p.country&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)(g,{size:14})," ",p.country]}),p.link&&(0,b.jsxs)("a",{href:p.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-accent hover:underline",children:[(0,b.jsx)(h,{size:14})," ",p.link.replace(/^https?:\/\//,"")]}),p.github_username&&(0,b.jsxs)("a",{href:`https://github.com/${p.github_username}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 hover:text-foreground",children:[(0,b.jsx)(i,{size:14})," ",p.github_username]})]}),(0,b.jsxs)("div",{className:"mt-3 flex gap-6 text-sm",children:[(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{children:t??0})," ",(0,b.jsx)("span",{className:"text-muted",children:"Following"})]}),(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{children:s??0})," ",(0,b.jsx)("span",{className:"text-muted",children:"Followers"})]}),(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{children:u??0})," ",(0,b.jsx)("span",{className:"text-muted",children:"Activities"})]})]})]})]}),(0,b.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4 sm:grid-cols-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[0.7rem] uppercase tracking-widest text-muted",children:"Streak"}),(0,b.jsxs)("p",{className:"inline-flex items-center gap-1 font-[family-name:var(--font-mono)] text-lg font-medium tabular-nums",children:[(0,b.jsx)(j.Flame,{size:16,className:"text-accent"}),v??0," days"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[0.7rem] uppercase tracking-widest text-muted",children:"Total Spend"}),(0,b.jsxs)("p",{className:"font-[family-name:var(--font-mono)] text-lg font-medium tabular-nums text-accent",children:["$",x.toFixed(2)]})]})]})]}),(0,b.jsxs)("div",{className:"border-b border-border p-6",children:[(0,b.jsx)("p",{className:"mb-3 text-xs font-semibold uppercase tracking-widest text-muted",children:"Contributions"}),(0,b.jsx)(k.ContributionGraph,{data:D})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"border-b border-border px-6 py-3",children:(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-widest text-muted",children:"Recent Activities"})}),F.length>0?(0,b.jsx)(l.FeedList,{initialPosts:F,userId:o?.id??""}):(0,b.jsx)("div",{className:"px-6 py-12 text-center text-sm text-muted",children:"No activities yet."})]})]})}a.s(["default",()=>o,"generateMetadata",()=>n],69495)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__81839d3e._.js.map