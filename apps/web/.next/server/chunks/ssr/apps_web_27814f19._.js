module.exports=[46501,a=>{"use strict";var b=a.i(63291),c=a.i(37503);let d={xs:{px:24,text:"text-[10px]"},sm:{px:32,text:"text-xs"},md:{px:40,text:"text-sm"},lg:{px:80,text:"text-xl"},xl:{px:120,text:"text-3xl"}};function e({src:a,alt:e="",size:f="md",fallback:g,className:h}){let{px:i,text:j}=d[f],k=g?g.split(/\s+/).slice(0,2).map(a=>a[0]?.toUpperCase()??"").join(""):"?";return a?(0,b.jsx)("img",{src:a,alt:e,width:i,height:i,className:(0,c.cn)("rounded-full object-cover shrink-0",h),style:{width:i,height:i}}):(0,b.jsx)("div",{className:(0,c.cn)("rounded-full bg-subtle text-muted flex items-center justify-center shrink-0 font-medium select-none",j,h),style:{width:i,height:i},"aria-label":e,children:k})}a.s(["Avatar",()=>e])},3288,a=>{"use strict";var b=a.i(63291),c=a.i(3252),d=a.i(37503);let e={primary:"bg-accent text-white border-none hover:brightness-90 active:brightness-85 disabled:opacity-50",secondary:"bg-transparent text-foreground border border-border hover:bg-subtle disabled:opacity-50",ghost:"bg-transparent text-foreground border-none hover:text-accent disabled:opacity-50"},f={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},g=(0,c.forwardRef)(({variant:a="primary",size:c="md",className:g,...h},i)=>(0,b.jsx)("button",{ref:i,className:(0,d.cn)("inline-flex items-center justify-center rounded-[4px] font-semibold cursor-pointer transition-[filter,background-color,color] duration-150",e[a],f[c],g),...h}));g.displayName="Button",a.s(["Button",0,g])},28546,a=>{"use strict";var b=a.i(63291),c=a.i(3252),d=a.i(37503);let e=(0,c.forwardRef)(({error:a,className:c,...e},f)=>(0,b.jsx)("textarea",{ref:f,className:(0,d.cn)("w-full rounded-[4px] border bg-white px-4 py-3 text-base text-foreground placeholder:text-muted outline-none transition-[border-color,box-shadow] duration-150 resize-y min-h-[100px]",a?"border-error":"border-border focus:border-accent focus:ring-3 focus:ring-accent/15",c),...e}));e.displayName="Textarea",a.s(["Textarea",0,e])},72349,a=>{"use strict";var b=a.i(63291),c=a.i(3252),d=a.i(37503);let e=(0,c.forwardRef)(({error:a,className:c,...e},f)=>(0,b.jsx)("input",{ref:f,className:(0,d.cn)("w-full rounded-[4px] border bg-white px-4 py-3 text-base text-foreground placeholder:text-muted outline-none transition-[border-color,box-shadow] duration-150",a?"border-error":"border-border focus:border-accent focus:ring-3 focus:ring-accent/15",c),...e}));e.displayName="Input",a.s(["Input",0,e])},81480,a=>{"use strict";var b=a.i(63291),c=a.i(3252),d=a.i(32275),e=a.i(41057),f=a.i(72349),g=a.i(28546),h=a.i(3288),i=a.i(46501);function j(){let[a,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)("");async function G(a){a.preventDefault(),l(!0),p(null),n(!1);let b=await fetch("/api/users/me",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:q||void 0,display_name:s||void 0,bio:u||void 0,link:w||void 0,country:y||void 0,github_username:A||void 0,is_public:C,timezone:E})});b.ok?n(!0):p((await b.json()).error??"Failed to save"),l(!1)}return((0,c.useEffect)(()=>{!async function(){let a=(0,d.createClient)(),{data:{user:b}}=await a.auth.getUser();if(!b)return;let{data:c}=await a.from("users").select("*").eq("id",b.id).single();c&&(j(c),r(c.username??""),t(c.display_name??""),v(c.bio??""),x(c.link??""),z(c.country??""),B(c.github_username??""),D(c.is_public),F(c.timezone??Intl.DateTimeFormat().resolvedOptions().timeZone))}()},[]),a)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("header",{className:"sticky top-0 z-10 flex h-16 items-center justify-between border-b border-border bg-background px-6",children:[(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Settings"}),(0,b.jsx)(e.default,{href:"/settings/import",className:"text-sm font-semibold text-accent hover:underline",children:"Import Usage Data"})]}),(0,b.jsxs)("form",{onSubmit:G,className:"mx-auto max-w-lg space-y-6 px-6 py-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 border-b border-border pb-6",children:[(0,b.jsx)(i.Avatar,{src:a.avatar_url,alt:a.username??"",fallback:s||q||"?",size:"lg"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.username??"No username set"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:a.id})]})]}),(0,b.jsxs)("div",{className:"border-b border-border pb-6",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-widest text-muted",children:"Username"}),(0,b.jsx)(f.Input,{value:q,onChange:a=>r(a.target.value),placeholder:"your_username",maxLength:20,pattern:"^[a-zA-Z0-9_]{3,20}$"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-muted",children:"3-20 chars, alphanumeric + underscore"})]}),(0,b.jsxs)("div",{className:"border-b border-border pb-6",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-widest text-muted",children:"Display Name"}),(0,b.jsx)(f.Input,{value:s,onChange:a=>t(a.target.value)})]}),(0,b.jsxs)("div",{className:"border-b border-border pb-6",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-widest text-muted",children:"Bio"}),(0,b.jsx)(g.Textarea,{value:u,onChange:a=>v(a.target.value),maxLength:160,rows:2,className:"min-h-0"}),(0,b.jsxs)("p",{className:"mt-1 text-xs text-muted",children:[u.length,"/160"]})]}),(0,b.jsxs)("div",{className:"border-b border-border pb-6",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-widest text-muted",children:"Country (ISO code)"}),(0,b.jsx)(f.Input,{value:y,onChange:a=>z(a.target.value.toUpperCase()),placeholder:"US",maxLength:2})]}),(0,b.jsxs)("div",{className:"border-b border-border pb-6",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-widest text-muted",children:"Website"}),(0,b.jsx)(f.Input,{value:w,onChange:a=>x(a.target.value),placeholder:"https://example.com",maxLength:200})]}),(0,b.jsxs)("div",{className:"border-b border-border pb-6",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-widest text-muted",children:"GitHub Username"}),(0,b.jsx)(f.Input,{value:A,onChange:a=>B(a.target.value)})]}),(0,b.jsxs)("div",{className:"border-b border-border pb-6",children:[(0,b.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase tracking-widest text-muted",children:"Timezone"}),(0,b.jsx)(f.Input,{value:E,onChange:a=>F(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",checked:C,onChange:a=>D(a.target.checked),id:"is_public",className:"accent-accent"}),(0,b.jsx)("label",{htmlFor:"is_public",className:"text-sm",children:"Public profile (visible on leaderboard)"})]}),o&&(0,b.jsx)("p",{className:"text-sm text-error",children:o}),m&&(0,b.jsx)("p",{className:"text-sm text-accent",children:"Saved successfully."}),(0,b.jsx)(h.Button,{type:"submit",disabled:k,className:"w-full py-3",children:k?"Saving...":"Save Changes"})]})]}):(0,b.jsx)("div",{className:"p-6 text-sm text-muted",children:"Loading..."})}a.s(["default",()=>j])}];

//# sourceMappingURL=apps_web_27814f19._.js.map