{"version":3,"sources":["../../../../../../apps/web/components/ui/Avatar.tsx","../../../../../../apps/web/app/%28app%29/search/page.tsx","../../../../../../node_modules/.bun/lucide-react%400.474.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/search.ts"],"sourcesContent":["import { cn } from \"@/lib/utils/cn\";\n\ntype AvatarSize = \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\";\n\ninterface AvatarProps {\n  src?: string | null;\n  alt?: string;\n  size?: AvatarSize;\n  fallback?: string;\n  className?: string;\n}\n\nconst sizeMap: Record<AvatarSize, { px: number; text: string }> = {\n  xs: { px: 24, text: \"text-[10px]\" },\n  sm: { px: 32, text: \"text-xs\" },\n  md: { px: 40, text: \"text-sm\" },\n  lg: { px: 80, text: \"text-xl\" },\n  xl: { px: 120, text: \"text-3xl\" },\n};\n\nfunction getInitials(name: string): string {\n  return name\n    .split(/\\s+/)\n    .slice(0, 2)\n    .map((s) => s[0]?.toUpperCase() ?? \"\")\n    .join(\"\");\n}\n\nexport function Avatar({ src, alt = \"\", size = \"md\", fallback, className }: AvatarProps) {\n  const { px, text } = sizeMap[size];\n  const initials = fallback ? getInitials(fallback) : \"?\";\n\n  if (src) {\n    return (\n      <img\n        src={src}\n        alt={alt}\n        width={px}\n        height={px}\n        className={cn(\n          \"rounded-full object-cover shrink-0\",\n          className,\n        )}\n        style={{ width: px, height: px }}\n      />\n    );\n  }\n\n  return (\n    <div\n      className={cn(\n        \"rounded-full bg-subtle text-muted flex items-center justify-center shrink-0 font-medium select-none\",\n        text,\n        className,\n      )}\n      style={{ width: px, height: px }}\n      aria-label={alt}\n    >\n      {initials}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport Link from \"next/link\";\nimport { Search } from \"lucide-react\";\nimport type { User } from \"@/types\";\nimport { Avatar } from \"@/components/ui/Avatar\";\n\nexport default function SearchPage() {\n  const [query, setQuery] = useState(\"\");\n  const [results, setResults] = useState<User[]>([]);\n  const [loading, setLoading] = useState(false);\n  const timerRef = useRef<ReturnType<typeof setTimeout>>(undefined);\n\n  useEffect(() => {\n    if (query.length < 2) {\n      setResults([]);\n      return;\n    }\n\n    clearTimeout(timerRef.current);\n    timerRef.current = setTimeout(async () => {\n      setLoading(true);\n      const res = await fetch(`/api/search?q=${encodeURIComponent(query)}&limit=20`);\n      const data = await res.json();\n      setResults(data.users ?? []);\n      setLoading(false);\n    }, 300);\n\n    return () => clearTimeout(timerRef.current);\n  }, [query]);\n\n  return (\n    <>\n      <header className=\"sticky top-0 z-10 border-b border-border bg-background px-6 py-3\">\n        <div className=\"flex items-center gap-3 rounded-[4px] border border-border px-4 py-2 focus-within:border-accent focus-within:ring-3 focus-within:ring-accent/15\">\n          <Search size={18} className=\"shrink-0 text-muted\" />\n          <input\n            type=\"text\"\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n            placeholder=\"Search users...\"\n            autoFocus\n            className=\"flex-1 bg-transparent text-base outline-none placeholder:text-muted\"\n          />\n        </div>\n      </header>\n\n      <div>\n        {query.length < 2 && !loading && results.length === 0 && (\n          <p className=\"px-6 py-8 text-center text-sm text-muted\">\n            Search for users by username\n          </p>\n        )}\n        {loading && (\n          <p className=\"px-6 py-8 text-center text-sm text-muted\">Searching...</p>\n        )}\n        {!loading && query.length >= 2 && results.length === 0 && (\n          <p className=\"px-6 py-8 text-center text-sm text-muted\">\n            No users found for &ldquo;{query}&rdquo;\n          </p>\n        )}\n        {results.map((user) => (\n          <Link\n            key={user.id}\n            href={`/u/${user.username}`}\n            className=\"flex items-center gap-4 border-b border-border px-6 py-4 hover:bg-subtle\"\n          >\n            <Avatar\n              src={user.avatar_url}\n              alt={user.username ?? \"\"}\n              fallback={user.username ?? \"?\"}\n              size=\"md\"\n            />\n            <div className=\"flex-1 overflow-hidden\">\n              <p className=\"font-medium\">{user.username}</p>\n              {user.bio && (\n                <p className=\"truncate text-sm text-muted\">{user.bio}</p>\n              )}\n            </div>\n          </Link>\n        ))}\n      </div>\n    </>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['path', { d: 'm21 21-4.3-4.3', key: '1qie3q' }],\n];\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('Search', __iconNode);\n\nexport default Search;\n"],"names":[],"mappings":"wDAAA,EAAA,EAAA,CAAA,CAAA,OAYA,IAAM,EAA4D,CAChE,GAAI,CAAE,GAAI,GAAI,KAAM,aAAc,EAClC,GAAI,CAAE,GAAI,GAAI,KAAM,SAAU,EAC9B,GAAI,CAAE,GAAI,GAAI,KAAM,SAAU,EAC9B,GAAI,CAAE,GAAI,GAAI,KAAM,SAAU,EAC9B,GAAI,CAAE,GAAI,IAAK,KAAM,UAAW,CAClC,EAUO,SAAS,EAAO,KAAE,CAAG,KAAE,EAAM,EAAE,MAAE,EAAO,IAAI,CAAE,UAAQ,WAAE,CAAS,CAAe,EACrF,GAAM,CAAE,IAAE,MAAE,CAAI,CAAE,CAAG,CAAO,CAAC,EAAK,CAC5B,EAAW,EATV,AASiC,EARrC,KAAK,CAAC,CAQmB,MAPzB,KAAK,CAAC,EAAG,GACT,GAAG,CAAC,AAAC,GAAM,CAAC,CAAC,EAAE,EAAE,eAAiB,IAClC,IAAI,CAAC,IAK4C,WAEpD,AAAI,EAEA,CAAA,EAAA,AAFK,EAEL,GAAA,EAAC,MAAA,CACC,IAAK,EACL,IAAK,EACL,MAAO,EACP,OAAQ,EACR,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,qCACA,GAEF,MAAO,CAAE,MAAO,EAAI,OAAQ,CAAG,IAMnC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,sGACA,EACA,GAEF,MAAO,CAAE,MAAO,EAAI,OAAQ,CAAG,EAC/B,aAAY,WAEX,GAGP,gEC3DA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OCgBM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAS,CAAA,EAAA,CAAT,AAAS,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAAA,AAAiB,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAhBI,CAAA,AAgBM,CAfvC,AAeiD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAfvC,AAeuC,CAfrC,AAeqC,AAfvC,CAeuC,CAfjC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAI,CAAA,CAAA,KAAM,CAAG,CAAA,CAAA,GAAK,GAAK,CAAA,QAAA,CAAU,CAAA,CAAA,CACvD,CAAA,CAAA,CAAA,CAAA,GAAQ,CAAA,AAAE,EAAG,CAAkB,gBAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CACjD,EDAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,EAAE,EAC3C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,EAAW,CAAA,EAAA,EAAA,MAAA,AAAM,OAAgC,GAoBvD,MAlBA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,IACR,AAAI,EAAM,MAAM,CAAG,GAAG,IACpB,EAAW,EAAE,GAIf,aAAa,EAAS,OAAO,EAC7B,EAAS,OAAO,CAAG,WAAW,UAC5B,GAAW,GACX,IAAM,EAAM,MAAM,MAAM,CAAC,cAAc,EAAE,mBAAmB,GAAO,SAAS,CAAC,EAE7E,EAAW,CADE,MAAM,EAAI,IAAI,EAAA,EACX,KAAK,EAAI,EAAE,EAC3B,GAAW,EACb,EAAG,KAEI,IAAM,aAAa,EAAS,OAAO,GACzC,CAAC,EAAM,EAGR,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,4EAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4JACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAO,KAAM,GAAI,UAAU,wBAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,YAAY,kBACZ,SAAS,CAAA,CAAA,EACT,UAAU,6EAKhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACE,EAAM,MAAM,CAAG,GAAK,CAAC,GAA8B,IAAnB,EAAQ,MAAM,EAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,iCAIzD,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,iBAEzD,CAAC,GAAW,EAAM,MAAM,EAAI,GAAwB,IAAnB,EAAQ,MAAM,EAC9C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,qDAA2C,uBAC3B,EAAM,OAGpC,EAAQ,GAAG,CAAC,AAAC,GACZ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAEH,KAAM,CAAC,GAAG,EAAE,EAAK,QAAQ,CAAA,CAAE,CAC3B,UAAU,qFAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,IAAK,EAAK,UAAU,CACpB,IAAK,EAAK,QAAQ,EAAI,GACtB,SAAU,EAAK,QAAQ,EAAI,IAC3B,KAAK,OAEP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uBAAe,EAAK,QAAQ,GACxC,EAAK,GAAG,EACP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCAA+B,EAAK,GAAG,QAbnD,EAAK,EAAE,QAqBxB","ignoreList":[2]}