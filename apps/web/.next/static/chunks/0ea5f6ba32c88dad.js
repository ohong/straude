(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3898,e=>{"use strict";var t=e.i(19097),s=e.i(42947),n=e.i(83050);function r({initialPosts:e,userId:r}){let[i,c]=(0,s.useState)(e),[l,u]=(0,s.useState)(e.length>=20?e[e.length-1].created_at:null),[a,o]=(0,s.useState)(!1),d=(0,s.useRef)(null),f=(0,s.useCallback)(async()=>{if(!l||a)return;o(!0);let e=await fetch(`/api/feed?cursor=${encodeURIComponent(l)}&limit=20`),t=await e.json();t.posts?.length?(c(e=>[...e,...t.posts]),u(t.next_cursor??null)):u(null),o(!1)},[l,a]);return(0,s.useEffect)(()=>{if(!d.current)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&f()},{rootMargin:"200px"});return e.observe(d.current),()=>e.disconnect()},[f]),(0,t.jsxs)("div",{children:[i.map(e=>(0,t.jsx)(n.ActivityCard,{post:e},e.id)),l&&(0,t.jsx)("div",{ref:d,className:"flex justify-center py-8",children:a&&(0,t.jsx)("span",{className:"text-sm text-muted",children:"Loading..."})})]})}e.s(["FeedList",()=>r])}]);