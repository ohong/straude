{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/components/app/feed/FeedList.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const FeedList = registerClientReference(\n    function() { throw new Error(\"Attempted to call FeedList() from the server but FeedList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/components/app/feed/FeedList.tsx <module evaluation>\",\n    \"FeedList\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,WAAW,IAAA,6UAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,2EACA","ignoreList":[0]}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/components/app/feed/FeedList.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const FeedList = registerClientReference(\n    function() { throw new Error(\"Attempted to call FeedList() from the server but FeedList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/components/app/feed/FeedList.tsx\",\n    \"FeedList\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,WAAW,IAAA,6UAAuB,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAgO,GAC7P,uDACA","ignoreList":[0]}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/app/%28app%29/feed/page.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\";\nimport { FeedList } from \"@/components/app/feed/FeedList\";\nimport type { Metadata } from \"next\";\n\nexport const metadata: Metadata = { title: \"Feed\" };\n\nexport default async function FeedPage() {\n  const supabase = await createClient();\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  // Get first page of feed posts (from people user follows)\n  const { data: followRows } = await supabase\n    .from(\"follows\")\n    .select(\"following_id\")\n    .eq(\"follower_id\", user!.id);\n\n  const followingIds = followRows?.map((f) => f.following_id) ?? [];\n  // Include own posts in the feed\n  const feedUserIds = [user!.id, ...followingIds];\n\n  let posts: any[] = [];\n\n  if (feedUserIds.length > 0) {\n    const { data } = await supabase\n      .from(\"posts\")\n      .select(\n        `\n        *,\n        user:users!posts_user_id_fkey(*),\n        daily_usage:daily_usage!posts_daily_usage_id_fkey(*),\n        kudos_count:kudos(count),\n        comment_count:comments(count)\n      `\n      )\n      .in(\"user_id\", feedUserIds)\n      .order(\"created_at\", { ascending: false })\n      .limit(20);\n\n    if (data) {\n      // Check which posts current user has kudosed\n      const postIds = data.map((p: any) => p.id);\n      const { data: userKudos } = await supabase\n        .from(\"kudos\")\n        .select(\"post_id\")\n        .eq(\"user_id\", user!.id)\n        .in(\"post_id\", postIds);\n\n      const kudosedSet = new Set(userKudos?.map((k) => k.post_id));\n\n      posts = data.map((p: any) => ({\n        ...p,\n        kudos_count: p.kudos_count?.[0]?.count ?? 0,\n        comment_count: p.comment_count?.[0]?.count ?? 0,\n        has_kudosed: kudosedSet.has(p.id),\n      }));\n    }\n  }\n\n  return (\n    <>\n      <header className=\"sticky top-0 z-10 flex h-16 items-center border-b border-border bg-background px-6\">\n        <h3 className=\"text-lg font-medium\">Following</h3>\n      </header>\n\n      {posts.length > 0 ? (\n        <FeedList initialPosts={posts} userId={user!.id} />\n      ) : (\n        <div className=\"flex flex-col items-center justify-center px-6 py-20 text-center\">\n          <p className=\"text-lg font-medium\">Your feed is empty</p>\n          <p className=\"mt-2 text-sm text-muted\">\n            Follow some builders to see their posts here.\n          </p>\n          <a\n            href=\"/search\"\n            className=\"mt-4 inline-block bg-accent px-4 py-2 text-sm font-semibold text-white\"\n            style={{ borderRadius: 4 }}\n          >\n            Find users to follow\n          </a>\n        </div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAGO,MAAM,WAAqB;IAAE,OAAO;AAAO;AAEnC,eAAe;IAC5B,MAAM,WAAW,MAAM,IAAA,wJAAY;IAEnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,0DAA0D;IAC1D,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,SAChC,IAAI,CAAC,WACL,MAAM,CAAC,gBACP,EAAE,CAAC,eAAe,KAAM,EAAE;IAE7B,MAAM,eAAe,YAAY,IAAI,CAAC,IAAM,EAAE,YAAY,KAAK,EAAE;IACjE,gCAAgC;IAChC,MAAM,cAAc;QAAC,KAAM,EAAE;WAAK;KAAa;IAE/C,IAAI,QAAe,EAAE;IAErB,IAAI,YAAY,MAAM,GAAG,GAAG;QAC1B,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,SACL,MAAM,CACL,CAAC;;;;;;MAMH,CAAC,EAEA,EAAE,CAAC,WAAW,aACd,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM,GACvC,KAAK,CAAC;QAET,IAAI,MAAM;YACR,6CAA6C;YAC7C,MAAM,UAAU,KAAK,GAAG,CAAC,CAAC,IAAW,EAAE,EAAE;YACzC,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,SACL,MAAM,CAAC,WACP,EAAE,CAAC,WAAW,KAAM,EAAE,EACtB,EAAE,CAAC,WAAW;YAEjB,MAAM,aAAa,IAAI,IAAI,WAAW,IAAI,CAAC,IAAM,EAAE,OAAO;YAE1D,QAAQ,KAAK,GAAG,CAAC,CAAC,IAAW,CAAC;oBAC5B,GAAG,CAAC;oBACJ,aAAa,EAAE,WAAW,EAAE,CAAC,EAAE,EAAE,SAAS;oBAC1C,eAAe,EAAE,aAAa,EAAE,CAAC,EAAE,EAAE,SAAS;oBAC9C,aAAa,WAAW,GAAG,CAAC,EAAE,EAAE;gBAClC,CAAC;QACH;IACF;IAEA,qBACE;;0BACE,mTAAC;gBAAO,WAAU;0BAChB,cAAA,mTAAC;oBAAG,WAAU;8BAAsB;;;;;;;;;;;YAGrC,MAAM,MAAM,GAAG,kBACd,mTAAC,iKAAQ;gBAAC,cAAc;gBAAO,QAAQ,KAAM,EAAE;;;;;qCAE/C,mTAAC;gBAAI,WAAU;;kCACb,mTAAC;wBAAE,WAAU;kCAAsB;;;;;;kCACnC,mTAAC;wBAAE,WAAU;kCAA0B;;;;;;kCAGvC,mTAAC;wBACC,MAAK;wBACL,WAAU;wBACV,OAAO;4BAAE,cAAc;wBAAE;kCAC1B;;;;;;;;;;;;;;AAOX"}}]
}