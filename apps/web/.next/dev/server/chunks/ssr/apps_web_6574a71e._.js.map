{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\nimport { cookies } from \"next/headers\";\n\nexport async function createClient() {\n  const cookieStore = await cookies();\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll();\n        },\n        setAll(cookiesToSet: { name: string; value: string; options?: Record<string, unknown> }[]) {\n          cookiesToSet.forEach(({ name, value, options }) =>\n            cookieStore.set(name, value, options as any)\n          );\n        },\n      },\n    }\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,+MAAO;IACjC,OAAO,IAAA,gRAAkB,oKAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAkF;gBACvF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;YAEjC;QACF;IACF;AAEJ"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/components/app/shared/Sidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Sidebar = registerClientReference(\n    function() { throw new Error(\"Attempted to call Sidebar() from the server but Sidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/components/app/shared/Sidebar.tsx <module evaluation>\",\n    \"Sidebar\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,UAAU,IAAA,6UAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,4EACA","ignoreList":[0]}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/components/app/shared/Sidebar.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Sidebar = registerClientReference(\n    function() { throw new Error(\"Attempted to call Sidebar() from the server but Sidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/components/app/shared/Sidebar.tsx\",\n    \"Sidebar\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,UAAU,IAAA,6UAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,wDACA","ignoreList":[0]}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/components/app/shared/RightSidebar.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\";\nimport Link from \"next/link\";\n\nexport async function RightSidebar({ userId }: { userId: string }) {\n  const supabase = await createClient();\n\n  // Get user's weekly stats\n  const now = new Date();\n  const weekStart = new Date(now);\n  weekStart.setDate(now.getDate() - now.getDay());\n  weekStart.setHours(0, 0, 0, 0);\n\n  const { data: weeklyUsage } = await supabase\n    .from(\"daily_usage\")\n    .select(\"cost_usd, total_tokens\")\n    .eq(\"user_id\", userId)\n    .gte(\"date\", weekStart.toISOString().split(\"T\")[0]);\n\n  const weekTokens = weeklyUsage?.reduce((s, r) => s + Number(r.total_tokens), 0) ?? 0;\n  const weekCost = weeklyUsage?.reduce((s, r) => s + Number(r.cost_usd), 0) ?? 0;\n\n  // Top 5 leaderboard preview\n  const { data: topUsers } = await supabase\n    .from(\"leaderboard_weekly\")\n    .select(\"user_id, username, avatar_url, total_cost\")\n    .order(\"total_cost\", { ascending: false })\n    .limit(5);\n\n  // Suggested users (popular users not yet followed)\n  const { data: following } = await supabase\n    .from(\"follows\")\n    .select(\"following_id\")\n    .eq(\"follower_id\", userId);\n\n  const followingIds = following?.map((f) => f.following_id) ?? [];\n  const excludeIds = [userId, ...followingIds];\n\n  const { data: suggested } = await supabase\n    .from(\"users\")\n    .select(\"id, username, avatar_url, bio\")\n    .eq(\"is_public\", true)\n    .not(\"username\", \"is\", null)\n    .not(\"id\", \"in\", `(${excludeIds.join(\",\")})`)\n    .limit(3);\n\n  function formatTokens(n: number) {\n    if (n >= 1_000_000) return `${(n / 1_000_000).toFixed(1)}M`;\n    if (n >= 1_000) return `${(n / 1_000).toFixed(1)}k`;\n    return String(n);\n  }\n\n  return (\n    <div className=\"flex flex-col\">\n      {/* Your Week */}\n      <div className=\"border-b border-border p-6\">\n        <p className=\"mb-1 text-xs font-semibold uppercase tracking-widest text-muted\">\n          Your Week\n        </p>\n        <p className=\"font-[family-name:var(--font-mono)] text-[2.5rem] leading-none tracking-tight\" style={{ letterSpacing: \"-0.03em\" }}>\n          {formatTokens(weekTokens)}\n        </p>\n        <p className=\"mt-1 text-sm text-muted\">Tokens generated</p>\n        <p className=\"mt-3 font-[family-name:var(--font-mono)] text-lg font-medium text-accent\">\n          ${weekCost.toFixed(2)}\n        </p>\n        <p className=\"text-xs text-muted\">This week's spend</p>\n      </div>\n\n      {/* Leaderboard Preview */}\n      <div className=\"border-b border-border p-6\">\n        <p className=\"mb-3 text-xs font-semibold uppercase tracking-widest text-muted\">\n          Top This Week\n        </p>\n        <ul className=\"flex flex-col gap-3\">\n          {topUsers?.map((u, i) => (\n            <li key={u.user_id}>\n              <Link\n                href={`/u/${u.username}`}\n                className=\"flex items-center gap-3 hover:text-accent\"\n              >\n                <span className=\"flex h-6 w-6 shrink-0 items-center justify-center text-xs font-semibold\">\n                  {i + 1}\n                </span>\n                {u.avatar_url ? (\n                  <img\n                    src={u.avatar_url}\n                    alt=\"\"\n                    className=\"h-8 w-8 rounded-full object-cover\"\n                  />\n                ) : (\n                  <span className=\"flex h-8 w-8 items-center justify-center rounded-full bg-foreground text-xs font-semibold text-background\">\n                    {u.username?.[0]?.toUpperCase() ?? \"?\"}\n                  </span>\n                )}\n                <span className=\"flex-1 truncate text-sm font-medium\">\n                  {u.username}\n                </span>\n                <span className=\"font-[family-name:var(--font-mono)] text-sm text-accent\">\n                  ${Number(u.total_cost).toFixed(0)}\n                </span>\n              </Link>\n            </li>\n          ))}\n          {(!topUsers || topUsers.length === 0) && (\n            <li className=\"text-sm text-muted\">No activity yet</li>\n          )}\n        </ul>\n        <Link\n          href=\"/leaderboard\"\n          className=\"mt-4 flex items-center justify-between border-t border-dashed border-muted/30 pt-4 text-xs font-bold uppercase tracking-widest hover:text-accent\"\n        >\n          View Full Leaderboard\n          <span className=\"text-base font-light\">&rarr;</span>\n        </Link>\n      </div>\n\n      {/* Suggested Users */}\n      {suggested && suggested.length > 0 && (\n        <div className=\"border-b border-border p-6\">\n          <p className=\"mb-3 text-xs font-semibold uppercase tracking-widest text-muted\">\n            Suggested Users\n          </p>\n          <ul className=\"flex flex-col gap-3\">\n            {suggested.map((u) => (\n              <li key={u.id}>\n                <Link\n                  href={`/u/${u.username}`}\n                  className=\"flex items-center gap-3 hover:text-accent\"\n                >\n                  {u.avatar_url ? (\n                    <img\n                      src={u.avatar_url}\n                      alt=\"\"\n                      className=\"h-8 w-8 rounded-full object-cover\"\n                    />\n                  ) : (\n                    <span className=\"flex h-8 w-8 items-center justify-center rounded-full bg-foreground text-xs font-semibold text-background\">\n                      {u.username?.[0]?.toUpperCase() ?? \"?\"}\n                    </span>\n                  )}\n                  <div className=\"flex-1 overflow-hidden\">\n                    <p className=\"truncate text-sm font-medium\">{u.username}</p>\n                    {u.bio && (\n                      <p className=\"truncate text-xs text-muted\">{u.bio}</p>\n                    )}\n                  </div>\n                </Link>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* Footer */}\n      <footer className=\"mt-auto p-6 text-xs text-muted\">\n        &copy; 2026 Straude\n        <br />\n        Privacy &middot; Terms\n      </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/components/app/shared/MobileNav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const MobileNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call MobileNav() from the server but MobileNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/components/app/shared/MobileNav.tsx <module evaluation>\",\n    \"MobileNav\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,YAAY,IAAA,6UAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,8EACA","ignoreList":[0]}},
    {"offset": {"line": 395, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/components/app/shared/MobileNav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const MobileNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call MobileNav() from the server but MobileNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/components/app/shared/MobileNav.tsx\",\n    \"MobileNav\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,YAAY,IAAA,6UAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,0DACA","ignoreList":[0]}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 417, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/app/%28app%29/layout.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\";\nimport { redirect } from \"next/navigation\";\nimport { Sidebar } from \"@/components/app/shared/Sidebar\";\nimport { RightSidebar } from \"@/components/app/shared/RightSidebar\";\nimport { MobileNav } from \"@/components/app/shared/MobileNav\";\n\nexport default async function AppLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const supabase = await createClient();\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    redirect(\"/login\");\n  }\n\n  const { data: profile } = await supabase\n    .from(\"users\")\n    .select(\"*\")\n    .eq(\"id\", user.id)\n    .single();\n\n  return (\n    <>\n      <div className=\"mx-auto flex h-screen w-full max-w-[1600px] border-x border-border\">\n        {/* Left sidebar — hidden below lg */}\n        <aside className=\"hidden w-60 shrink-0 border-r border-border lg:flex lg:flex-col\">\n          <Sidebar username={profile?.username} />\n        </aside>\n\n        {/* Main content */}\n        <main className=\"flex-1 overflow-y-auto\" style={{ scrollbarWidth: \"none\" }}>\n          {children}\n        </main>\n\n        {/* Right sidebar — hidden below xl */}\n        <aside className=\"hidden w-80 shrink-0 border-l border-border xl:flex xl:flex-col\">\n          <RightSidebar userId={user.id} />\n        </aside>\n      </div>\n\n      {/* Mobile bottom nav */}\n      <MobileNav username={profile?.username} />\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;;AAEe,eAAe,UAAU,EACtC,QAAQ,EAGT;IACC,MAAM,WAAW,MAAM,IAAA,wJAAY;IACnC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM;QACT,IAAA,sQAAQ,EAAC;IACX;IAEA,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;IAET,qBACE;;0BACE,mTAAC;gBAAI,WAAU;;kCAEb,mTAAC;wBAAM,WAAU;kCACf,cAAA,mTAAC,iKAAO;4BAAC,UAAU,SAAS;;;;;;;;;;;kCAI9B,mTAAC;wBAAK,WAAU;wBAAyB,OAAO;4BAAE,gBAAgB;wBAAO;kCACtE;;;;;;kCAIH,mTAAC;wBAAM,WAAU;kCACf,cAAA,mTAAC,2KAAY;4BAAC,QAAQ,KAAK,EAAE;;;;;;;;;;;;;;;;;0BAKjC,mTAAC,qKAAS;gBAAC,UAAU,SAAS;;;;;;;;AAGpC"}}]
}