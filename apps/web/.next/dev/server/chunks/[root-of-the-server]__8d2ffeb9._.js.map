{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\nimport { cookies } from \"next/headers\";\n\nexport async function createClient() {\n  const cookieStore = await cookies();\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll();\n        },\n        setAll(cookiesToSet: { name: string; value: string; options?: Record<string, unknown> }[]) {\n          cookiesToSet.forEach(({ name, value, options }) =>\n            cookieStore.set(name, value, options as any)\n          );\n        },\n      },\n    }\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,iNAAO;IACjC,OAAO,IAAA,kRAAkB,oKAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAkF;gBACvF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;YAEjC;QACF;IACF;AAEJ"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/app/api/auth/cli/init/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { randomBytes } from \"node:crypto\";\nimport { createClient } from \"@/lib/supabase/server\";\n\nfunction generateCode(): string {\n  const chars = \"ABCDEFGHJKLMNPQRSTUVWXYZ23456789\"; // no I/O/0/1 for readability\n  let part1 = \"\";\n  let part2 = \"\";\n  const bytes = randomBytes(8);\n  for (let i = 0; i < 4; i++) {\n    part1 += chars[bytes[i]! % chars.length];\n    part2 += chars[bytes[i + 4]! % chars.length];\n  }\n  return `${part1}-${part2}`;\n}\n\nexport async function POST() {\n  const supabase = await createClient();\n  const code = generateCode();\n  const expiresAt = new Date(Date.now() + 10 * 60 * 1000).toISOString();\n\n  const { error } = await supabase.from(\"cli_auth_codes\").insert({\n    code,\n    status: \"pending\",\n    expires_at: expiresAt,\n  });\n\n  if (error) {\n    return NextResponse.json({ error: \"Failed to create auth code\" }, { status: 500 });\n  }\n\n  const appUrl = process.env.NEXT_PUBLIC_APP_URL ?? \"https://straude.com\";\n  const verifyUrl = `${appUrl}/cli/verify?code=${code}`;\n\n  return NextResponse.json({ code, verify_url: verifyUrl });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,SAAS;IACP,MAAM,QAAQ,oCAAoC,6BAA6B;IAC/E,IAAI,QAAQ;IACZ,IAAI,QAAQ;IACZ,MAAM,QAAQ,IAAA,oIAAW,EAAC;IAC1B,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;QAC1B,SAAS,KAAK,CAAC,KAAK,CAAC,EAAE,GAAI,MAAM,MAAM,CAAC;QACxC,SAAS,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,GAAI,MAAM,MAAM,CAAC;IAC9C;IACA,OAAO,GAAG,MAAM,CAAC,EAAE,OAAO;AAC5B;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,0JAAY;IACnC,MAAM,OAAO;IACb,MAAM,YAAY,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK,MAAM,WAAW;IAEnE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,MAAM,CAAC;QAC7D;QACA,QAAQ;QACR,YAAY;IACd;IAEA,IAAI,OAAO;QACT,OAAO,qNAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA6B,GAAG;YAAE,QAAQ;QAAI;IAClF;IAEA,MAAM,SAAS,6DAAmC;IAClD,MAAM,YAAY,GAAG,OAAO,iBAAiB,EAAE,MAAM;IAErD,OAAO,qNAAY,CAAC,IAAI,CAAC;QAAE;QAAM,YAAY;IAAU;AACzD"}}]
}