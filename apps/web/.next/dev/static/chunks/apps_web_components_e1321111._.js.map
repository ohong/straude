{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/components/ui/Avatar.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils/cn\";\n\ntype AvatarSize = \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\";\n\ninterface AvatarProps {\n  src?: string | null;\n  alt?: string;\n  size?: AvatarSize;\n  fallback?: string;\n  className?: string;\n}\n\nconst sizeMap: Record<AvatarSize, { px: number; text: string }> = {\n  xs: { px: 24, text: \"text-[10px]\" },\n  sm: { px: 32, text: \"text-xs\" },\n  md: { px: 40, text: \"text-sm\" },\n  lg: { px: 80, text: \"text-xl\" },\n  xl: { px: 120, text: \"text-3xl\" },\n};\n\nfunction getInitials(name: string): string {\n  return name\n    .split(/\\s+/)\n    .slice(0, 2)\n    .map((s) => s[0]?.toUpperCase() ?? \"\")\n    .join(\"\");\n}\n\nexport function Avatar({ src, alt = \"\", size = \"md\", fallback, className }: AvatarProps) {\n  const { px, text } = sizeMap[size];\n  const initials = fallback ? getInitials(fallback) : \"?\";\n\n  if (src) {\n    return (\n      <img\n        src={src}\n        alt={alt}\n        width={px}\n        height={px}\n        className={cn(\n          \"rounded-full object-cover shrink-0\",\n          className,\n        )}\n        style={{ width: px, height: px }}\n      />\n    );\n  }\n\n  return (\n    <div\n      className={cn(\n        \"rounded-full bg-subtle text-muted flex items-center justify-center shrink-0 font-medium select-none\",\n        text,\n        className,\n      )}\n      style={{ width: px, height: px }}\n      aria-label={alt}\n    >\n      {initials}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAYA,MAAM,UAA4D;IAChE,IAAI;QAAE,IAAI;QAAI,MAAM;IAAc;IAClC,IAAI;QAAE,IAAI;QAAI,MAAM;IAAU;IAC9B,IAAI;QAAE,IAAI;QAAI,MAAM;IAAU;IAC9B,IAAI;QAAE,IAAI;QAAI,MAAM;IAAU;IAC9B,IAAI;QAAE,IAAI;QAAK,MAAM;IAAW;AAClC;AAEA,SAAS,YAAY,IAAY;IAC/B,OAAO,KACJ,KAAK,CAAC,OACN,KAAK,CAAC,GAAG,GACT,GAAG,CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,EAAE,iBAAiB,IAClC,IAAI,CAAC;AACV;AAEO,SAAS,OAAO,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,OAAO,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAe;IACrF,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,OAAO,CAAC,KAAK;IAClC,MAAM,WAAW,WAAW,YAAY,YAAY;IAEpD,IAAI,KAAK;QACP,qBACE,kQAAC;YACC,KAAK;YACL,KAAK;YACL,OAAO;YACP,QAAQ;YACR,WAAW,IAAA,0IAAE,EACX,sCACA;YAEF,OAAO;gBAAE,OAAO;gBAAI,QAAQ;YAAG;;;;;;IAGrC;IAEA,qBACE,kQAAC;QACC,WAAW,IAAA,0IAAE,EACX,uGACA,MACA;QAEF,OAAO;YAAE,OAAO;YAAI,QAAQ;QAAG;QAC/B,cAAY;kBAEX;;;;;;AAGP;KAjCgB"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/components/ui/Badge.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils/cn\";\n\ntype BadgeVariant = \"default\" | \"accent\" | \"verified\" | \"rank-1\" | \"rank-2\" | \"rank-3\" | \"rank-top10\";\n\ninterface BadgeProps {\n  variant?: BadgeVariant;\n  className?: string;\n  children: React.ReactNode;\n}\n\nconst variantStyles: Record<BadgeVariant, string> = {\n  default: \"bg-subtle text-foreground\",\n  accent: \"bg-accent text-white\",\n  verified: \"text-accent\",\n  \"rank-1\": \"text-white\",\n  \"rank-2\": \"text-foreground\",\n  \"rank-3\": \"text-white\",\n  \"rank-top10\": \"bg-accent text-white\",\n};\n\nexport function Badge({ variant = \"default\", className, children }: BadgeProps) {\n  const isRank = variant.startsWith(\"rank-\");\n\n  return (\n    <span\n      className={cn(\n        \"inline-flex items-center gap-1 rounded-[4px] px-2 py-0.5 text-xs font-semibold leading-tight\",\n        variantStyles[variant],\n        isRank && variant === \"rank-1\" && \"bg-linear-to-br from-[#FFD700] to-[#FFA500]\",\n        isRank && variant === \"rank-2\" && \"bg-linear-to-br from-[#E8E8E8] to-[#C0C0C0]\",\n        isRank && variant === \"rank-3\" && \"bg-linear-to-br from-[#DDA15E] to-[#BC6C25]\",\n        className,\n      )}\n    >\n      {children}\n    </span>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAUA,MAAM,gBAA8C;IAClD,SAAS;IACT,QAAQ;IACR,UAAU;IACV,UAAU;IACV,UAAU;IACV,UAAU;IACV,cAAc;AAChB;AAEO,SAAS,MAAM,EAAE,UAAU,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAc;IAC5E,MAAM,SAAS,QAAQ,UAAU,CAAC;IAElC,qBACE,kQAAC;QACC,WAAW,IAAA,0IAAE,EACX,gGACA,aAAa,CAAC,QAAQ,EACtB,UAAU,YAAY,YAAY,+CAClC,UAAU,YAAY,YAAY,+CAClC,UAAU,YAAY,YAAY,+CAClC;kBAGD;;;;;;AAGP;KAjBgB"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///Users/ohong/dev/straude/apps/web/components/app/leaderboard/LeaderboardTable.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { cn } from \"@/lib/utils/cn\";\nimport { Avatar } from \"@/components/ui/Avatar\";\nimport { Badge } from \"@/components/ui/Badge\";\nimport type { LeaderboardEntry } from \"@/types\";\n\nconst PERIODS = [\n  { value: \"day\", label: \"Day\" },\n  { value: \"week\", label: \"Week\" },\n  { value: \"month\", label: \"Month\" },\n  { value: \"all_time\", label: \"All Time\" },\n];\n\nconst REGIONS = [\n  { value: \"\", label: \"Global\" },\n  { value: \"north_america\", label: \"N. America\" },\n  { value: \"south_america\", label: \"S. America\" },\n  { value: \"europe\", label: \"Europe\" },\n  { value: \"asia\", label: \"Asia\" },\n  { value: \"africa\", label: \"Africa\" },\n  { value: \"oceania\", label: \"Oceania\" },\n];\n\nfunction rankVariant(rank: number): \"rank-1\" | \"rank-2\" | \"rank-3\" | \"rank-top10\" | \"default\" {\n  if (rank === 1) return \"rank-1\";\n  if (rank === 2) return \"rank-2\";\n  if (rank === 3) return \"rank-3\";\n  if (rank <= 10) return \"rank-top10\";\n  return \"default\";\n}\n\nfunction formatTokens(n: number): string {\n  if (n >= 1_000_000) return `${(n / 1_000_000).toFixed(1)}M`;\n  if (n >= 1_000) return `${(n / 1_000).toFixed(1)}k`;\n  return String(n);\n}\n\nexport function LeaderboardTable({\n  entries,\n  currentUserId,\n  currentPeriod,\n  currentRegion,\n  userCountry,\n}: {\n  entries: LeaderboardEntry[];\n  currentUserId: string;\n  currentPeriod: string;\n  currentRegion: string | null;\n  userCountry: string | null;\n}) {\n  const router = useRouter();\n\n  function navigate(period: string, region: string) {\n    const params = new URLSearchParams();\n    params.set(\"period\", period);\n    if (region) params.set(\"region\", region);\n    router.push(`/leaderboard?${params.toString()}`);\n  }\n\n  return (\n    <div>\n      {/* Period tabs */}\n      <div className=\"flex border-b border-border\">\n        {PERIODS.map(({ value, label }) => (\n          <button\n            key={value}\n            onClick={() => navigate(value, currentRegion ?? \"\")}\n            className={cn(\n              \"cursor-pointer border-b-2 border-transparent px-5 py-3 text-sm font-semibold text-muted\",\n              currentPeriod === value && \"border-b-accent text-accent\",\n            )}\n          >\n            {label}\n          </button>\n        ))}\n      </div>\n\n      {/* Region filter */}\n      {userCountry && (\n        <div className=\"flex gap-1 overflow-x-auto border-b border-border px-4 py-2\">\n          {REGIONS.map(({ value, label }) => (\n            <button\n              key={value}\n              onClick={() => navigate(currentPeriod, value)}\n              className={cn(\n                \"shrink-0 cursor-pointer rounded-[4px] px-3 py-1 text-xs font-semibold\",\n                (currentRegion ?? \"\") === value\n                  ? \"bg-foreground text-background\"\n                  : \"text-muted hover:text-foreground\",\n              )}\n            >\n              {label}\n            </button>\n          ))}\n        </div>\n      )}\n\n      {/* Desktop table */}\n      <div className=\"hidden overflow-x-auto sm:block\">\n        <table className=\"w-full text-left text-sm\">\n          <thead>\n            <tr className=\"border-b border-border text-xs uppercase tracking-widest text-muted\">\n              <th className=\"px-6 py-3 font-semibold\">Rank</th>\n              <th className=\"px-6 py-3 font-semibold\">User</th>\n              <th className=\"px-6 py-3 text-right font-semibold\">Cost</th>\n              <th className=\"px-6 py-3 text-right font-semibold\">Tokens</th>\n              <th className=\"px-6 py-3 text-right font-semibold\">Streak</th>\n            </tr>\n          </thead>\n          <tbody>\n            {entries.map((entry) => (\n              <tr\n                key={entry.user_id}\n                className={cn(\n                  \"border-b border-border hover:bg-subtle\",\n                  entry.user_id === currentUserId &&\n                    \"border-l-4 border-l-accent bg-highlight-row\",\n                )}\n              >\n                <td className=\"px-6 py-3\">\n                  <Badge variant={rankVariant(entry.rank)}>{entry.rank}</Badge>\n                </td>\n                <td className=\"px-6 py-3\">\n                  <Link\n                    href={`/u/${entry.username}`}\n                    className=\"flex items-center gap-3 hover:underline\"\n                  >\n                    <Avatar\n                      src={entry.avatar_url}\n                      alt={entry.username}\n                      fallback={entry.username}\n                      size=\"sm\"\n                    />\n                    <span className=\"font-medium\">{entry.username}</span>\n                    {entry.country && (\n                      <span className=\"text-xs text-muted\">{entry.country}</span>\n                    )}\n                  </Link>\n                </td>\n                <td className=\"px-6 py-3 text-right font-mono font-medium tabular-nums text-accent\">\n                  ${entry.total_cost.toFixed(2)}\n                </td>\n                <td className=\"px-6 py-3 text-right font-mono tabular-nums\">\n                  {formatTokens(entry.total_tokens)}\n                </td>\n                <td className=\"px-6 py-3 text-right font-mono tabular-nums\">\n                  {entry.streak != null ? `${entry.streak}d` : \"-\"}\n                </td>\n              </tr>\n            ))}\n            {entries.length === 0 && (\n              <tr>\n                <td colSpan={5} className=\"px-6 py-12 text-center text-muted\">\n                  No entries yet.\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Mobile card list */}\n      <div className=\"sm:hidden\">\n        {entries.map((entry) => (\n          <Link\n            key={entry.user_id}\n            href={`/u/${entry.username}`}\n            className={cn(\n              \"flex items-center gap-3 border-b border-border px-4 py-3 hover:bg-subtle\",\n              entry.user_id === currentUserId &&\n                \"border-l-4 border-l-accent bg-highlight-row\",\n            )}\n          >\n            <Badge variant={rankVariant(entry.rank)}>{entry.rank}</Badge>\n            <Avatar\n              src={entry.avatar_url}\n              alt={entry.username}\n              fallback={entry.username}\n              size=\"sm\"\n            />\n            <div className=\"flex-1 overflow-hidden\">\n              <p className=\"truncate font-medium\">{entry.username}</p>\n              {entry.country && (\n                <p className=\"text-xs text-muted\">{entry.country}</p>\n              )}\n            </div>\n            <div className=\"text-right\">\n              <p className=\"font-mono text-sm font-medium tabular-nums text-accent\">\n                ${entry.total_cost.toFixed(2)}\n              </p>\n              <p className=\"font-mono text-xs tabular-nums text-muted\">\n                {formatTokens(entry.total_tokens)}\n              </p>\n            </div>\n          </Link>\n        ))}\n        {entries.length === 0 && (\n          <p className=\"px-6 py-12 text-center text-muted\">No entries yet.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}